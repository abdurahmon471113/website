{% extends 'base.html' %}
{% load widget_tweaks %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-lg-6 col-md-8 col-sm-10">

            <div class="card shadow-lg rounded-4 border-0">
                <div class="card-body p-5">

                    <h2 class="text-center mb-4 fw-bold text-primary">‚ûï –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–æ—Å—Ç</h2>

                    <form method="POST" enctype="multipart/form-data" novalidate>
                        {% csrf_token %}

                        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
                        <div class="form-floating mb-4">
                            {{ form.title|add_class:"form-control form-control-lg rounded-3" }}
                            {{ form.title.label_tag }}
                            {% if form.title.errors %}
                                <div class="text-danger mt-1 small">
                                    {% for error in form.title.errors %}{{ error }}<br>{% endfor %}
                                </div>
                            {% endif %}
                        </div>

                        <!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
                        <div class="form-floating mb-4">
                            {{ form.description|add_class:"form-control form-control-lg rounded-3" }}
                            {{ form.description.label_tag }}
                            {% if form.description.errors %}
                                <div class="text-danger mt-1 small">
                                    {% for error in form.description.errors %}{{ error }}<br>{% endfor %}
                                </div>
                            {% endif %}
                        </div>

                        <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏—è -->
                        <div class="form-floating mb-4">
                            {{ form.category|add_class:"form-select form-select-lg rounded-3" }}
                            {{ form.category.label_tag }}
                            {% if form.category.errors %}
                                <div class="text-danger mt-1 small">
                                    {% for error in form.category.errors %}{{ error }}<br>{% endfor %}
                                </div>
                            {% endif %}
                        </div>

                        <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –ø—Ä–µ–≤—å—é -->
                        <div class="mb-4">
                            {{ form.image|add_class:"form-control form-control-lg" }}
                            {% if form.image.errors %}
                                <div class="text-danger mt-1 small">
                                    {% for error in form.image.errors %}{{ error }}<br>{% endfor %}
                                </div>
                            {% endif %}
                            <img id="preview" src="#" alt="–ü—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è" class="img-fluid mt-3 rounded shadow-sm d-none"/>
                        </div>

                        <button type="submit" class="btn btn-primary btn-lg w-100 shadow-sm"
                                style="transition: transform 0.2s;">
                            –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ø–æ—Å—Ç
                        </button>
                    </form>

                </div>
            </div>

            <p class="text-center text-muted mt-3 small">
                –í—Å–µ –ø–æ–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è. üìù
            </p>

        </div>
    </div>
</div>

<!-- JS –¥–ª—è –ø—Ä–µ–≤—å—é –∫–∞—Ä—Ç–∏–Ω–∫–∏ -->
<script>
document.getElementById("id_image").addEventListener("change", function(event){
    const [file] = event.target.files;
    if(file){
        const preview = document.getElementById("preview");
        preview.src = URL.createObjectURL(file);
        preview.classList.remove("d-none");
    }
});
</script>

{% endblock %}
