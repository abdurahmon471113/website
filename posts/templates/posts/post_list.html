{% extends 'base.html' %}
{% load static %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è{% endblock %}

{% block content %}
<!-- –°–µ–∫—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
<!--<div class="mb-4 d-flex flex-wrap gap-2">-->
<!--    <h2>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h2>-->
<!--    {% for category in categories %}-->
<!--    <a href="{% url 'posts:category_posts' category.id %}" class="btn btn-outline-secondary btn-sm">-->
<!--        {{ category.name }}-->
<!--    </a>-->
<!--{% endfor %}-->

<!--</div>-->

 <h2 class="mb-4 fw-bold">üì∞ –í—Å–µ –ø–æ—Å—Ç—ã</h2>
<!-- –°–µ—Ç–∫–∞ –ø–æ—Å—Ç–æ–≤ -->
<div class="row g-4">

    {% for post in posts %}

    <div class="col-md-4">

        <div class="card post-card h-100 shadow-sm border-0">

            <div class="card-body d-flex flex-column">

                <!-- –∫–∞—Ç–µ–≥–æ—Ä–∏—è -->
                <span class="badge bg-secondary mb-2">
                    {{ post.category.name }}
                </span>

                <!-- –∑–∞–≥–æ–ª–æ–≤–æ–∫ -->
                <h5 class="fw-bold">
                    {{ post.title }}
                </h5>

                <!-- –æ–ø–∏—Å–∞–Ω–∏–µ -->
                <p class="text-muted small flex-grow-1">
                    {{ post.description|truncatechars:100 }}
                </p>

                <!-- –Ω–∏–∑ –∫–∞—Ä—Ç–æ—á–∫–∏ -->
                <div class="d-flex justify-content-between align-items-center mt-3">

                    <small class="text-muted">
                        üë§ {{ post.author.username }}
                    </small>

                    {% if request.user == post.author %}

                        <div class="d-flex gap-2">
                            <a href="{% url 'posts:update_post' post.pk %}"
                               class="btn btn-sm btn-outline-warning">‚úèÔ∏è</a>

                            <a href="{% url 'posts:delete_post' post.pk %}"
                               class="btn btn-sm btn-outline-danger">üóë</a>
                        </div>

                    {% else %}

                        <a href="{% url 'posts:post_detail' post.pk %}"
                           class="btn btn-sm btn-primary">
                           –ß–∏—Ç–∞—Ç—å
                        </a>

                    {% endif %}

                </div>

            </div>
        </div>

    </div>

    {% empty %}
        <p>–ü–æ—Å—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</p>
    {% endfor %}

</div>

{% endblock %}
